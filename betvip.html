<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>VIP PREDICTOR MOBILE</title>
    <style>
        :root { --neon: #00f2ff; --tai: #ff4444; --xiu: #44aaff; }
        body, html { margin: 0; padding: 0; height: 100%; overflow: hidden; background: #000; font-family: sans-serif; }
        
        #main-iframe { position: absolute; width: 100%; height: 100%; border: none; z-index: 1; }
        #snow-canvas { position: fixed; top: 0; pointer-events: none; z-index: 2; width: 100%; height: 100%; }

        /* Nút mở lại tool khi bị đóng */
        #open-btn {
            position: fixed; bottom: 20px; left: 20px; z-index: 999;
            background: var(--neon); border: none; border-radius: 50%;
            width: 40px; height: 40px; font-weight: bold; display: none;
            box-shadow: 0 0 15px var(--neon);
        }

        /* Khung Tool Chính */
        #tool-container {
            position: absolute; top: 20%; left: 10%; width: 280px;
            background: rgba(10, 10, 20, 0.9); border: 2px solid var(--neon);
            border-radius: 25px; padding: 15px; z-index: 100;
            box-shadow: 0 0 25px rgba(0, 242, 255, 0.4); color: #fff;
            backdrop-filter: blur(10px); touch-action: none;
        }

        .header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; }
        .close-btn { background: none; border: none; color: #ff4444; font-size: 24px; cursor: pointer; padding: 0 10px; }

        .menu-screen, .action-screen { display: none; }
        .active { display: block; }

        .btn {
            width: 100%; padding: 12px; margin: 8px 0; border-radius: 15px;
            border: none; background: #222; color: #fff; font-weight: bold;
            cursor: pointer; transition: 0.2s; border: 1px solid #444;
        }
        .btn-main { background: linear-gradient(90deg, #00f2ff, #0066ff); border: none; }

        input {
            width: 90%; padding: 10px; border-radius: 10px; border: 1px solid var(--neon);
            background: #000; color: var(--neon); text-align: center; margin-bottom: 10px;
        }

        #result { font-size: 30px; font-weight: 900; margin: 15px 0; min-height: 40px; text-align: center; }
        .scan-line {
            width: 100%; height: 2px; background: var(--neon);
            box-shadow: 0 0 10px var(--neon); position: absolute; left: 0;
            display: none; animation: moveScan 2s infinite linear;
        }
        @keyframes moveScan { from { top: 0; } to { top: 100%; } }
    </style>
</head>
<body>

<canvas id="snow-canvas"></canvas>
<iframe id="main-iframe" src="https://play.betvip.fit/"></iframe>
<button id="open-btn" onclick="toggleTool(true)">+</button>

<div id="tool-container">
    <div class="scan-line" id="scanner"></div>
    <div class="header">
        <span style="font-size: 12px; color: var(--neon);">SYSTEM HACK V2.5</span>
        <button class="close-btn" onclick="toggleTool(false)">−</button>
    </div>

    <div id="menu-screen" class="menu-screen active">
        <h2 style="text-align: center; font-size: 18px;">CHỌN CHẾ ĐỘ</h2>
        <button class="btn" onclick="showScreen('md5')">DỰ ĐOÁN MD5 (HEX)</button>
        <button class="btn" onclick="showScreen('pattern')">SOI CẦU PATTERN</button>
    </div>

    <div id="md5-screen" class="action-screen">
        <input type="text" id="md5-input" placeholder="Nhập mã MD5...">
        <button class="btn btn-main" onclick="calcMD5()">QUÉT HEX & PHÂN TÍCH</button>
        <button class="btn" onclick="showScreen('menu')" style="font-size: 10px;">QUAY LẠI</button>
    </div>

    <div id="pattern-screen" class="action-screen">
        <input type="text" id="pattern-input" placeholder="Ví dụ: T-X-T-T-X">
        <button class="btn btn-main" onclick="calcPattern()">PHÂN TÍCH CẦU</button>
        <button class="btn" onclick="showScreen('menu')" style="font-size: 10px;">QUAY LẠI</button>
    </div>

    <div id="result">---</div>
</div>

<script>
    // --- DI CHUYỂN TRÊN MOBILE & PC ---
    const tool = document.getElementById("tool-container");
    let active = false, currentX, currentY, initialX, initialY, xOffset = 0, yOffset = 0;

    tool.addEventListener("touchstart", dragStart, false);
    document.addEventListener("touchend", dragEnd, false);
    document.addEventListener("touchmove", drag, false);
    tool.addEventListener("mousedown", dragStart, false);
    document.addEventListener("mouseup", dragEnd, false);
    document.addEventListener("mousemove", drag, false);

    function dragStart(e) {
        if (e.target.tagName === 'INPUT' || e.target.tagName === 'BUTTON') return;
        initialX = (e.type === "touchstart" ? e.touches[0].clientX : e.clientX) - xOffset;
        initialY = (e.type === "touchstart" ? e.touches[0].clientY : e.clientY) - yOffset;
        active = true;
    }
    function dragEnd() { active = false; }
    function drag(e) {
        if (active) {
            e.preventDefault();
            currentX = (e.type === "touchstart" ? e.touches[0].clientX : e.clientX) - initialX;
            currentY = (e.type === "touchstart" ? e.touches[0].clientY : e.clientY) - initialY;
            xOffset = currentX; yOffset = currentY;
            tool.style.transform = `translate3d(${currentX}px, ${currentY}px, 0)`;
        }
    }

    // --- CHUYỂN MÀN HÌNH ---
    function showScreen(screen) {
        document.querySelectorAll('.menu-screen, .action-screen').forEach(s => s.classList.remove('active'));
        document.getElementById(screen + '-screen').classList.add('active');
        document.getElementById('result').innerHTML = "---";
    }

    function toggleTool(show) {
        tool.style.display = show ? 'block' : 'none';
        document.getElementById('open-btn').style.display = show ? 'none' : 'block';
    }

    // --- THUẬT TOÁN ---
    function runEffect(callback) {
        const scan = document.getElementById('scanner');
        const res = document.getElementById('result');
        scan.style.display = 'block';
        res.innerHTML = '<small style="font-size:12px">ANALYZING...</small>';
        setTimeout(() => { scan.style.display = 'none'; callback(); }, 2000);
    }

    function calcMD5() {
        const val = document.getElementById('md5-input').value;
        if(!val) return;
        runEffect(() => {
            // Thuật toán Hex: Lấy 5 ký tự đầu, chuyển từ Hex sang Dec, chia dư cho 2
            let hex = val.substring(0, 5);
            let num = parseInt(hex, 16);
            if (isNaN(num)) num = val.length; 
            document.getElementById('result').innerHTML = (num % 2 === 0) ? '<span style="color:var(--xiu)">XỈU</span>' : '<span style="color:var(--tai)">TÀI</span>';
        });
    }

    function calcPattern() {
        const val = document.getElementById('pattern-input').value.toUpperCase();
        if(!val) return;
        runEffect(() => {
            // Thuật toán Pattern: Dựa vào ký tự cuối và độ dài chuỗi
            let last = val.slice(-1);
            document.getElementById('result').innerHTML = (last === 'T') ? '<span style="color:var(--xiu)">XỈU (BẺ)</span>' : '<span style="color:var(--tai)">TÀI (BẺ)</span>';
        });
    }

    // --- TUYẾT RƠI ---
    const canvas = document.getElementById('snow-canvas');
    const ctx = canvas.getContext('2d');
    let flakes = [];
    function initSnow() {
        canvas.width = window.innerWidth; canvas.height = window.innerHeight;
        for(let i=0; i<60; i++) flakes.push({x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*3+1, d: Math.random()+0.5});
    }
    function drawSnow() {
        ctx.clearRect(0,0,canvas.width, canvas.height);
        ctx.fillStyle = "white"; ctx.beginPath();
        flakes.forEach(f => {
            ctx.moveTo(f.x, f.y); ctx.arc(f.x, f.y, f.r, 0, Math.PI*2, true);
            f.y += f.d; if(f.y > canvas.height) f.y = -10;
        });
        ctx.fill(); requestAnimationFrame(drawSnow);
    }
    initSnow(); drawSnow();
</script>
</body>
</html>
