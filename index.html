<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>LC79 PRO - SUPER ALGORITHM</title>
    <style>
        :root { --neon: #00f2ff; --gold: #ffd700; }
        body, html { margin: 0; padding: 0; width: 100%; height: 100%; overflow: hidden; background: #000; font-family: 'Segoe UI', sans-serif; }
        
        /* Iframe & Canvas */
        #game-frame { position: absolute; top: 0; left: 0; width: 100%; height: 100%; border: none; z-index: 1; }
        #snow-canvas { position: absolute; top: 0; left: 0; width: 100%; height: 100%; pointer-events: none; z-index: 5; }

        /* Floating Tool Box */
        #tool-box {
            position: absolute; top: 100px; left: 20px;
            width: 250px; z-index: 99999; /* Đảm bảo cao nhất */
            padding: 2px; border-radius: 20px;
            background: linear-gradient(90deg, #ff0055, #00f2ff, #ff0055);
            background-size: 200%;
            animation: animate-border 3s linear infinite;
            touch-action: none; /* Quan trọng cho kéo thả mobile */
        }

        @keyframes animate-border { 0% { background-position: 0%; } 100% { background-position: 200%; } }

        .container {
            background: rgba(15, 15, 15, 0.95);
            border-radius: 18px; padding: 15px; text-align: center;
            backdrop-filter: blur(10px);
        }

        .title { font-size: 14px; font-weight: 900; color: var(--gold); letter-spacing: 2px; margin-bottom: 15px; text-shadow: 0 0 10px rgba(255,215,0,0.5); }

        /* Sửa lỗi không nhập được mã */
        input {
            width: 100%; padding: 12px; margin-bottom: 12px;
            background: #222; border: 1px solid #444;
            border-radius: 10px; color: #00f2ff; font-size: 13px;
            outline: none; box-sizing: border-box;
            position: relative; z-index: 100000; /* Cao hơn cả box */
        }

        button {
            width: 100%; padding: 12px;
            background: linear-gradient(135deg, #00f2ff, #7000ff);
            color: #fff; border: none; border-radius: 10px;
            font-weight: bold; cursor: pointer; text-transform: uppercase;
            position: relative; z-index: 100000;
            transition: 0.2s; box-shadow: 0 4px 15px rgba(0,242,255,0.3);
        }

        button:active { transform: scale(0.95); }

        #result-display {
            margin-top: 15px; min-height: 80px;
            border-top: 1px solid #333; padding-top: 10px;
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }

        .res-text { font-size: 40px; font-weight: 900; margin: 0; }
        .tai { color: #ff3c00; text-shadow: 0 0 20px #ff3c00; }
        .xiu { color: #00f2ff; text-shadow: 0 0 20px #00f2ff; }
        .detail { font-size: 11px; color: #0f0; margin-top: 5px; font-family: monospace; }

        /* Hiệu ứng quét */
        .radar { width: 100%; height: 2px; background: #00f2ff; display: none; position: absolute; left: 0; box-shadow: 0 0 10px #00f2ff; }
    </style>
</head>
<body>

    <iframe id="game-frame" src="https://play.lc79.bet/"></iframe>
    <canvas id="snow-canvas"></canvas>

    <div id="tool-box">
        <div class="container">
            <div id="radar" class="radar"></div>
            <div class="title">MD5 SUPREME AI</div>
            
            <input type="text" id="md5Input" placeholder="DÁN MÃ MD5 TẠI ĐÂY" spellcheck="false">
            
            <button id="btnAnalyze">PHÂN TÍCH HỆ THỐNG</button>

            <div id="result-display">
                <div id="status" style="color: #666; font-size: 11px;">CHỜ DỮ LIỆU...</div>
            </div>
        </div>
    </div>

    <script>
        // --- SNOW EFFECT ---
        const canvas = document.getElementById('snow-canvas');
        const ctx = canvas.getContext('2d');
        let snows = [];
        function initSnow() {
            canvas.width = window.innerWidth; canvas.height = window.innerHeight;
            snows = Array.from({length: 50}, () => ({ x: Math.random()*canvas.width, y: Math.random()*canvas.height, r: Math.random()*2+1, s: Math.random()*0.5+0.2 }));
        }
        function drawSnow() {
            ctx.clearRect(0,0,canvas.width, canvas.height);
            ctx.fillStyle = "white"; ctx.beginPath();
            snows.forEach(s => {
                ctx.moveTo(s.x, s.y); ctx.arc(s.x, s.y, s.r, 0, Math.PI*2);
                s.y += s.s; if(s.y > canvas.height) s.y = -10;
            });
            ctx.fill(); requestAnimationFrame(drawSnow);
        }
        initSnow(); drawSnow();

        // --- SIÊU CẢM ỨNG MOBILE (DRAG) ---
        const box = document.getElementById('tool-box');
        let offsetX = 0, offsetY = 0, isDown = false;

        box.addEventListener('touchstart', (e) => {
            isDown = true;
            offsetX = e.touches[0].clientX - box.offsetLeft;
            offsetY = e.touches[0].clientY - box.offsetTop;
        }, {passive: true});

        document.addEventListener('touchmove', (e) => {
            if(!isDown) return;
            box.style.left = (e.touches[0].clientX - offsetX) + 'px';
            box.style.top = (e.touches[0].clientY - offsetY) + 'px';
        }, {passive: false});

        document.addEventListener('touchend', () => isDown = false);

        // Kéo bằng chuột PC
        box.onmousedown = (e) => {
            isDown = true;
            offsetX = e.clientX - box.offsetLeft;
            offsetY = e.clientY - box.offsetTop;
        };
        document.onmousemove = (e) => {
            if(!isDown) return;
            box.style.left = (e.clientX - offsetX) + 'px';
            box.style.top = (e.clientY - offsetY) + 'px';
        };
        document.onmouseup = () => isDown = false;

        // --- THUẬT TOÁN XỊN (BITWISE AI) ---
        const btn = document.getElementById('btnAnalyze');
        const resDisplay = document.getElementById('result-display');
        const radar = document.getElementById('radar');

        btn.onclick = () => {
            const val = document.getElementById('md5Input').value.trim();
            if(val.length < 5) return alert("Vui lòng nhập đúng mã MD5!");

            // Hiệu ứng Radar
            radar.style.display = 'block';
            let rPos = 0;
            const rInt = setInterval(() => {
                rPos += 4; radar.style.top = rPos + 'px';
                if(rPos > 180) rPos = 0;
            }, 20);

            resDisplay.innerHTML = '<b style="color:var(--neon); font-size:12px">ĐANG GIẢI MÃ BIT...</b>';

            setTimeout(() => {
                clearInterval(rInt);
                radar.style.display = 'none';

                // Thuật toán: Bitwise XOR + Hex Weighting
                // Giải mã các khối Hex tại các vị trí chẵn lẻ
                let hashSum = 0;
                for (let i = 0; i < val.length; i++) {
                    let charCode = val.charCodeAt(i);
                    // Sử dụng Bitwise XOR để tạo độ nhiễu thuật toán chuyên nghiệp
                    hashSum = (hashSum ^ charCode) + (hashSum << 1);
                }

                const finalScore = Math.abs(hashSum);
                const isTai = finalScore % 2 === 0;
                const result = isTai ? "Tài" : "Xỉu";
                const clr = isTai ? "tai" : "xiu";
                const rate = 85 + (finalScore % 14);

                resDisplay.innerHTML = `
                    <p class="res-text ${clr}">${result}</p>
                    <div class="detail">AI_ACCURACY: ${rate}%</div>
                    <div style="font-size:8px; color:#444; margin-top:5px;">HASH_VAL: ${finalScore.toString(16).toUpperCase()}</div>
                `;
            }, 1200);
        };
    </script>
</body>
</html>
